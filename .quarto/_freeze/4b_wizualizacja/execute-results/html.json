{
  "hash": "83b60c6bd34fde021fbff5003721620c",
  "result": {
    "markdown": "# Formatowanie wykresów\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndata(\"gapminder\", package = \"gapminder\")\ndane2007 <- subset(gapminder, year==2007)\n```\n:::\n\n\nElementy formatowania wykresów:\n\n-   etykiety osi\n-   tytuł wykresu\n-   zmiana koloru, kształtu oraz wielkości punktów,\n-   zmiana koloru, typu oraz grubości linii,\n\n## Zmiana koloru, kształtu oraz wielkości punktów\n\nW R sposób wyświetlania punktu (kształt) kodowany jest za pomoca numeru.\n\n![](figures/5_points-symbols.png){width=\"220\"}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=dane2007, aes(x=gdpPercap, y=lifeExp)) +\n  geom_point(size = 3, color = \"red\", shape = 15)\n```\n\n::: {.cell-output-display}\n![](4b_wizualizacja_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n> Wyświetl wykres zależności zmiennych lifeExp od gdpPercap używając kształtu wypełnionego trójkąta o kolorze zielonym i wielkości 2. \n\n## Zmiana koloru oraz grubości linii \n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = gapminder, aes(x = year, y = lifeExp)) + \n  stat_summary(fun = \"mean\", geom = \"line\", \n               color = \"orange\", lwd = 2, linetype = \"dotted\" )\n```\n\n::: {.cell-output-display}\n![](4b_wizualizacja_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n> Zmień kolor linii na zielony, typ: linia kreskowa, grubość: 3\n\n## Modyfikacjia wykresu względem wartości zmiennej\n\nWykresy mogą być modyfikowane na podstawie wartości zmiennej. W tym celu można posłużyć się atrybutami:\n\n-   kolor (*color*)\n-   kształt (*shape*)\n-   wielkość (*size*)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=dane2007, aes(x=gdpPercap, y=lifeExp, shape = continent)) + \n  geom_point()\n```\n\n::: {.cell-output-display}\n![](4b_wizualizacja_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=dane2007, aes(x=gdpPercap, y=lifeExp, color = continent)) + \n  geom_point()\n```\n\n::: {.cell-output-display}\n![](4b_wizualizacja_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=dane2007, aes(x=gdpPercap, y=lifeExp, color = pop)) + \n  geom_point()\n```\n\n::: {.cell-output-display}\n![](4b_wizualizacja_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=dane2007, aes(x=gdpPercap, y=lifeExp, size = pop)) + geom_point()\n```\n\n::: {.cell-output-display}\n![](4b_wizualizacja_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\n## Tytuł wykresu \n\nTytuł wykresu można dodać używając *ggtitle* lub argumentu *title* wewnątrz *labs*\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=dane2007, aes(x=gdpPercap, y=lifeExp)) +\n  geom_point() + \n  labs(x = \"PKB na osobę (USD)\", \n       y = \"Oczekiwana dalsza długość trwania życia\") + \n  ggtitle(\"Zależność między oczekiwaną długością trwania życia, a PKB w 2007 roku\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=dane2007, aes(x=gdpPercap, y=lifeExp)) +\n  geom_point() + \n  labs(x = \"PKB na osobę (USD)\", \n       y = \"Oczekiwana dalsza długość trwania życia\", \n       title = \"Zależność między oczekiwaną długością trwania życia, a PKB w 2007 roku\")\n```\n\n::: {.cell-output-display}\n![](4b_wizualizacja_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n\n## Formatowanie osi \n\n### Etykiety osi \n\nArgument *labs* pozwala na dodanie do wykresów etykiet osi oraz tytułu.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=dane2007, aes(x=gdpPercap, y=lifeExp)) +\n  geom_point() + \n  labs(x = \"PKB na osobę (USD)\", y = \"Oczekiwana dalsza długość trwania życia\")\n```\n\n::: {.cell-output-display}\n![](4b_wizualizacja_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n### Zakres \n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=dane2007, aes(x=gdpPercap, y=lifeExp)) +\n  geom_point() + \n  labs(x = \"PKB na osobę (USD)\", y = \"Oczekiwana dalsza długość trwania życia\") + \n  lims(x = c(0, 10000))\n```\n\n::: {.cell-output-display}\n![](4b_wizualizacja_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\n### Skale \n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=dane2007, aes(x=gdpPercap, y=lifeExp)) +\n  geom_point() + \n  scale_x_continuous(name = \"PKB na osobę w USD\", \n                     breaks = seq(0, 50000, 5000)) + \n  scale_y_continuous(name = \"Oczekiwana długość trwania życia\", \n                     limits = c(0, 100),\n                     breaks = seq(0, 100, 20))\n```\n\n::: {.cell-output-display}\n![](4b_wizualizacja_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=dane2007, aes(x = continent, y = lifeExp)) +\n  geom_boxplot() + \n  labs(x = \"Oczekiwana długość trwania życia\") + \n  scale_x_discrete(name = \"Kontynenty\", \n                   labels = c(\n                     \"Africa\" = \"Afryka\", \n                     \"Americas\" = \"Ameryka Płn. i Płd.\", \n                     \"Asia\" = \"Azja\", \n                     \"Europe\" = \"Europa\", \n                     \"Oceania\" = \"Australia i Oceania\"))\n```\n\n::: {.cell-output-display}\n![](4b_wizualizacja_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\n### Skala logarytmiczna\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = dane2007, aes(x = pop, y = lifeExp)) +\n  geom_point() +\n  labs(x = \"Liczba ludności\", y = \"Oczekiwana długość trwania życia\") + \n  scale_x_log10()\n```\n\n::: {.cell-output-display}\n![](4b_wizualizacja_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\n### Odwrócenie osi \n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = dane2007, aes(x = continent)) +\n  geom_bar() +\n  coord_flip()\n```\n\n::: {.cell-output-display}\n![](4b_wizualizacja_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\n### Sortowanie \n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(forcats)\nggplot(data =dane2007, aes(x = fct_infreq(continent))) +\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](4b_wizualizacja_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = dane2007, aes(x = fct_reorder(continent, lifeExp, median), y = lifeExp)) +\n  geom_boxplot()\n```\n\n::: {.cell-output-display}\n![](4b_wizualizacja_files/figure-html/unnamed-chunk-18-1.png){width=672}\n:::\n:::\n\n\n> Dodaj tytuł oraz podpisy osi do powyższych wykresów. \n\n## Skale kolorystyczne\n\n### Skale kolorystyczne dla zmiennej jakościowej\n\nWięcej: https://sjspielman.github.io/introverse/articles/color_fill_scales.html\n\n- `scale_color_manual` oraz `scale_fill_manual` pozwala na samodzielne zdefiniowanie kolorów. Można także przypisać wektor z nazwami kategorii - wtedy kolor zostanie przypisany do danej kategorii.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=dane2007, aes(x=gdpPercap, y=lifeExp, color = continent)) +\n  geom_point() + \n  labs(x = \"PKB na osobę (USD)\", y = \"Oczekiwana dalsza długość trwania życia\") + \n  scale_color_manual(values = c(\"orange\", \"darkgreen\", \"lightgreen\",\"blue\", \"purple\"))\n```\n\n::: {.cell-output-display}\n![](4b_wizualizacja_files/figure-html/unnamed-chunk-19-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=dane2007, aes(x=gdpPercap, y=lifeExp, color = continent)) +\n  geom_point() + \n  labs(x = \"PKB na osobę (USD)\", y = \"Oczekiwana dalsza długość trwania życia\") + \n  scale_color_manual(values = c(\"Africa\" = \"orange\", \n                                \"Americas\" = \"red\",\n                                \"Asia\" = \"blue\",\n                                \"Europe\" = \"purple\",\n                                \"Oceania\" = \"green\"))\n```\n\n::: {.cell-output-display}\n![](4b_wizualizacja_files/figure-html/unnamed-chunk-20-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=dane2007, aes(x = continent, y = lifeExp, fill = continent)) +\n  geom_boxplot() + \n  labs(x = \"Oczekiwana długość trwania życia\") + \n  scale_fill_manual(values = c(\"blue\", \"orange\", \"magenta\", \"yellow\", \"green\"))\n```\n\n::: {.cell-output-display}\n![](4b_wizualizacja_files/figure-html/unnamed-chunk-21-1.png){width=672}\n:::\n:::\n\n\n- `scale_color_brewer` oraz `scale_fill_brewer` z pakietu `RColorBrewer` pozwala na zdefiniowanie jednej z palet dostarczanych przez pakier `RColorBrewer. Dostępne palety w pakiecie `RColorBrewer`. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nRColorBrewer::display.brewer.all()\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(RColorBrewer)\nggplot(data=dane2007, aes(x=gdpPercap, y=lifeExp, color = continent)) +\n  geom_point() + \n  labs(x = \"PKB na osobę (USD)\", y = \"Oczekiwana dalsza długość trwania życia\") + \n  scale_color_brewer(palette = \"Set1\")\n```\n\n::: {.cell-output-display}\n![](4b_wizualizacja_files/figure-html/unnamed-chunk-23-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=dane2007, aes(x = continent, y = lifeExp, fill = continent)) +\n  geom_boxplot() + \n  labs(x = \"Oczekiwana długość trwania życia\") + \n  scale_fill_brewer(palette = \"Set1\")\n```\n\n::: {.cell-output-display}\n![](4b_wizualizacja_files/figure-html/unnamed-chunk-24-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=dane2007, aes(x = continent, y = lifeExp, fill = continent)) +\n  geom_boxplot() + \n  labs(x = \"Oczekiwana długość trwania życia\") + \n  scale_fill_brewer(palette = \"YlGn\", direction = -1)\n```\n\n::: {.cell-output-display}\n![](4b_wizualizacja_files/figure-html/unnamed-chunk-25-1.png){width=672}\n:::\n:::\n\n\n- `scale_color_discrete_qualitative` oraz `scale_fill_discrete_qualitative` z pakietu `colorspace`\n(https://colorspace.r-forge.r-project.org/articles/ggplot2_color_scales.html) \n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(colorspace)\nggplot(data = dane2007, aes(x = gdpPercap, y = lifeExp, color = continent)) +\n  geom_point() +\n  scale_color_discrete_qualitative(palette = \"Dynamic\")\n```\n\n::: {.cell-output-display}\n![](4b_wizualizacja_files/figure-html/unnamed-chunk-26-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=dane2007, aes(x = continent, y = lifeExp, fill = continent)) +\n  geom_boxplot() + \n  labs(x = \"Oczekiwana długość trwania życia\") + \n  scale_fill_discrete_qualitative(palette = \"Harmonic\")\n```\n\n::: {.cell-output-display}\n![](4b_wizualizacja_files/figure-html/unnamed-chunk-27-1.png){width=672}\n:::\n:::\n\n\n> Wykonaj wykres pudełkowy dla zmiennej gdpPercap względem lat. Pokoloruj pudełka, podpisz osie oraz dodaj tytuł do wykresu. \n\n### Skale kolorystyczne dla zmiennej ilościowej\n\n- `scale_colour_gradient`\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=dane2007, aes(x=gdpPercap, y=lifeExp, color = pop)) +\n  geom_point() + \n  labs(x = \"PKB na osobę (USD)\", y = \"Oczekiwana dalsza długość trwania życia\", color = \"Kontynent\") + \n  scale_colour_gradient(low = \"orange\", high = \"brown\")\n```\n\n::: {.cell-output-display}\n![](4b_wizualizacja_files/figure-html/unnamed-chunk-28-1.png){width=672}\n:::\n:::\n\n\n-  `scale_color_continuous_sequential` z pakietu `colorspace`\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=dane2007, aes(x=gdpPercap, y=lifeExp, color = pop)) +\n  geom_point() + \n  labs(x = \"PKB na osobę (USD)\", y = \"Oczekiwana dalsza długość trwania życia\") + \n   scale_color_continuous_sequential(palette = \"YlOrRd\")\n```\n\n::: {.cell-output-display}\n![](4b_wizualizacja_files/figure-html/unnamed-chunk-29-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data =dane2007, aes(x = gdpPercap, y = lifeExp, color = pop)) +\n  geom_point() +\n    labs(x = \"PKB na osobę (USD)\", y = \"Oczekiwana dalsza długość trwania życia\", color = \"Liczba ludności\") + \n  scale_color_continuous_sequential(trans = \"log10\", labels = scales::label_comma(), palette = \"YlOrRd\")\n```\n\n::: {.cell-output-display}\n![](4b_wizualizacja_files/figure-html/unnamed-chunk-30-1.png){width=672}\n:::\n:::\n\n\n> Wykonaj wykres ilustrujący zależność między PKB na osobę, a długością trwania życia. Pokoloruj punkty względem zmienej pop. Użyj dowolnej palety. \n\n## Tekst na wykresach \n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = dane2007, aes(x = gdpPercap, y = lifeExp, color = continent)) +\n  geom_point() +\n  geom_text(aes(label = country), check_overlap = TRUE)\n```\n\n::: {.cell-output-display}\n![](4b_wizualizacja_files/figure-html/unnamed-chunk-31-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggrepel)\nggplot(data = dane2007, aes(x = gdpPercap, y = lifeExp, color = continent)) +\n  geom_point() +\n  geom_text_repel(aes(label = country), max.overlaps = 3)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: ggrepel: 138 unlabeled data points (too many overlaps). Consider\nincreasing max.overlaps\n```\n:::\n\n::: {.cell-output-display}\n![](4b_wizualizacja_files/figure-html/unnamed-chunk-32-1.png){width=672}\n:::\n:::\n\n\n## Motywy\n\nMotywy (ang. *theme*) pozwalają na modyfikację i dostosowanie komponentów wykresów, takich jak tytuł, etykiety, tło, wielkość czcionki, położenie legendy itd. Istnieją wbudowane rozwiązania, np. `theme_bw()`, `theme_classic()`, `theme_light()`, `theme_minimal()`. Można także użyć funkcji `theme()` i dowolnie zmodyfikować każdy element. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=dane2007, aes(x=gdpPercap, y=lifeExp, color = continent)) +\n  geom_point() + \n  labs(x = \"PKB na osobę w USD\", y = \"Oczekiwana długość trwania życia\", \n       title = \"Zależność między oczekiwaną długością trwania życia\\na PKB na osobę w 2007 roku\") + \n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](4b_wizualizacja_files/figure-html/unnamed-chunk-33-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=dane2007, aes(x=gdpPercap, y=lifeExp, color = continent)) +\n  geom_point() + \n  labs(x = \"PKB na osobę w USD\", y = \"Oczekiwana długość trwania życia\", labs = \"Kontynent\", \n       title = \"Zależność między oczekiwaną długością trwania życia\\na PKB na osobę w 2007 roku\") + \n  scale_color_brewer(name = \"Kontynent\", palette = \"Set1\", \n                     labels = c(\"Africa\" = \"Afryka\", \"Americas\" = \"Ameryka N/S\", \"Asia\" = \"Azja\", \"Europe\" = \"Europa\", \"Oceania\" = \"Australia i Oceania\")) + \n  theme_bw() + \n  theme(base_size = 13, \n        legend.position = \"bottom\", \n        legend.title = element_text(face = \"bold\"))\n```\n\n::: {.cell-output-display}\n![](4b_wizualizacja_files/figure-html/unnamed-chunk-34-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "4b_wizualizacja_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}